<div class="row" style="width: 100%; min-height: 64.7vh;">
  <!-- Side navigation bar -->
  <div class="side">
    <app-side-nav-bar [navigationTabs]="navbar"></app-side-nav-bar>
  </div>
  <!-- Main content area -->
  <div class="main">
    <div *ngIf="isProfile">
      <div class="form-container d-flex flex-column">

        <h4 class="pb-3">{{isReadOnly ? role : 'Edit'}} Profile</h4>

        <form class="edit-profile-form" [formGroup]="editProfileForm" (ngSubmit)="editProfile()">

          <div class="d-flex flex-row justify-content-start align-items-center gap-5 pb-4">
            <img class="avatar" [ngClass]="!userImage ? 'avatar-padding' : null"
              [src]="userImage ? userImage : '../../../../assets/default/user.png'">

            <div class="d-flex justify-content-between align-items-center gap-5">

              <app-primary-button [button]="updateImageButton" (click)="fileInput.click()"></app-primary-button>
              <input type="file" (change)="onFileSelected($event)" style="display: none;" #fileInput>

              <app-delete-button mwlConfirmationPopover popoverTitle="Avatar Delete confirmation"
                popoverMessage="Do you really want to delete?" placement="bottom" confirmButtonType="danger"
                (confirm)="deleteProfilePicture()" (cancel)="true" [button]="deleteButton"></app-delete-button>

            </div>
          </div>

          <div class="my-3 mt-5">
            <app-secondary-button *ngIf="isReadOnly" (click)="toggleReadOnly()"
              [button]="editButton"></app-secondary-button>
          </div>

          <table class="form-table" cellspacing="0">
            <!-- Client fields -->
            <tr *ngIf="role === 'Client'">
              <td class="first-td" colspan="3">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>First Name</mat-label>
                  <input matInput class="input-data" required [readonly]="isReadOnly" formControlName="firstName"
                    placeholder="Add First Name">
                  <mat-hint
                    *ngIf="editProfileForm.controls['firstName'].invalid && editProfileForm.controls['firstName'].touched">
                    <span class="small text-danger"> First name cannot be left blank! </span>
                  </mat-hint>
                </mat-form-field>
              </td>
              <td colspan="3">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>Last Name</mat-label>
                  <input matInput class="input-data" required [readonly]="isReadOnly" formControlName="lastName"
                    placeholder="Add Last Name">
                  <mat-hint
                    *ngIf="editProfileForm.controls['lastName'].invalid && editProfileForm.controls['lastName'].touched">
                    <span class="small text-danger">Last name cannot be left blank! </span>
                  </mat-hint>
                </mat-form-field>
              </td>
            </tr>
            <tr *ngIf="role === 'Vendor'">
              <td class="first-td" colspan="3">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>Company Name</mat-label>
                  <input matInput class="input-data" required [readonly]="isReadOnly" formControlName="companyName"
                    placeholder="Add Company Name">
                  <mat-hint
                    *ngIf="editProfileForm.controls['companyName'].invalid && editProfileForm.controls['companyName'].touched">
                    <span class="small text-danger"> Company name cannot be left blank! </span>
                  </mat-hint>
                </mat-form-field>
              </td>
              <td colspan="3">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>Contact Person Name</mat-label>
                  <input matInput class="input-data" required [readonly]="isReadOnly"
                    formControlName="contactPersonName" placeholder="Add Contact Person Name">
                  <mat-hint
                    *ngIf="editProfileForm.controls['contactPersonName'].invalid && editProfileForm.controls['contactPersonName'].touched">
                    <span class="small text-danger">Contact person name cannot be left blank! </span>
                  </mat-hint>
                </mat-form-field>
              </td>
            </tr>
            <!-- Admin and other common fields -->
            <tr>
              <td class="first-td" colspan="3">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>Email</mat-label>
                  <input matInput class="input-data" required [readonly]="isReadOnly" formControlName="email"
                    placeholder="Add Email">
                  <mat-hint
                    *ngIf="editProfileForm.controls['email'].invalid && editProfileForm.controls['email'].touched">
                    <span *ngIf="editProfileForm.get('email')?.errors?.['required']" class="small text-danger">Email
                      address cannot be left blank! </span>
                    <span *ngIf="editProfileForm.get('email')?.errors?.['email']" class="small text-danger">Please enter
                      a valid email address! </span>
                  </mat-hint>
                </mat-form-field>
              </td>
              <td colspan="3">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>Phone Number</mat-label>
                  <input matInput class="input-data" required [readonly]="isReadOnly" formControlName="phoneNumber"
                    placeholder="Add Phone Number">
                  <mat-hint
                    *ngIf="editProfileForm.controls['phoneNumber'].invalid && editProfileForm.controls['phoneNumber'].touched">
                    <span *ngIf="editProfileForm.controls['phoneNumber'].hasError('required')"
                      class="small text-danger">Phone number cannot be left blank!</span>
                    <span *ngIf="editProfileForm.controls['phoneNumber'].hasError('pattern')"
                      class="small text-danger">Invalid phone number!</span>
                  </mat-hint>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td class="first-td" colspan="2">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>House No</mat-label>
                  <input matInput class="input-data" [readonly]="isReadOnly" formControlName="houseNo"
                    placeholder="Add House No">
                </mat-form-field>
              </td>
              <td class="first-td" colspan="2">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>Street</mat-label>
                  <input matInput class="input-data" [readonly]="isReadOnly" formControlName="street"
                    placeholder="Add Street">
                </mat-form-field>
              </td>
              <td colspan="2">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>Road</mat-label>
                  <input matInput class="input-data" [readonly]="isReadOnly" formControlName="road"
                    placeholder="Add Road">
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td class="first-td">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>City</mat-label>
                  <input matInput class="input-data" [readonly]="isReadOnly" formControlName="city"
                    placeholder="Add City">
                </mat-form-field>
              </td>
            </tr>
          </table>
          <div>
            <div class="button d-flex gap-3">
              <app-primary-button *ngIf="!isReadOnly" [button]="saveButton"></app-primary-button>
              <app-delete-button (click)="deleteUser()" [button]="deleteAccount"></app-delete-button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div *ngIf="!isProfile">
      <h1>Change password</h1>
    </div>
  </div>
</div>